## Пример 3:

Паттерн "Fan-Out", который эффективно распределяет данные из исходного канала (`src`) на несколько рабочих горутин через целевые каналы. Вот как это работает:

1. Функция `FanOutWithWaitGroup` принимает исходный канал (`src`) и желаемое количество целевых каналов (`n`). Она возвращает срез этих целевых каналов, которые будут использоваться для распределения данных.

2. Функция создает массив целевых каналов (`dests`) и запускает `n` горутин, каждая из которых связана с одним целевым каналом. Эти каналы используются для распределения данных из исходного канала на рабочие горутины.

3. Внутри каждой рабочей горутины есть цикл `for`, который читает данные из исходного канала и пересылает их в соответствующий целевой канал. Рабочие горутины откладывают закрытие своих целевых каналов, чтобы обеспечить правильное завершение.

4. В функции `main` создается исходный канал (`src`), который содержит целые числа от 1 до 10.

5. Горутина заполняет исходный канал значениями, и закрытие исходного канала откладывается после завершения.

6. Вызывается функция `FanOutWithWaitGroup` с исходным каналом и желаемым количеством целевых каналов (`n`), которое в данном случае установлено равным 5.

7. Используется `sync.WaitGroup` (`wg`), чтобы обеспечить ожидание завершения работы всех рабочих горутин в функции `main`.

8. Для каждого целевого канала, сгенерированного функцией `FanOutWithWaitGroup`, инициируется рабочая горутина. Эти рабочие горутины читают данные из соответствующих целевых каналов и выводят их, включая индекс рабочей горутины и данные.

9. После запуска рабочих горутин программа ожидает завершения всех рабочих с помощью `wg.Wait()`.

В заключение, паттерн "Fan-Out" эффективно делит данные из исходного канала на несколько рабочих горутин для параллельной обработки. Это практический подход для параллелизации работы и оптимального использования имеющихся ресурсов.
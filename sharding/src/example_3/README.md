## Пример 3:

Паттерн "Sharding" также применяется для распределения и управления данными между несколькими шардами. Вот как это работает:

1. **Структура данных**: Структура `Data` используется для представления пар ключ-значение, где `Key` - это строка, а `Value` - целое число.

2. **Главная функция**:
   - Создается массив элементов `Data`, представляющий данные, которые нужно распределить по шардам.
   - Создается срез карт (`shards`) для имитации шардов, в данном случае, три шарда.
   - Используется `sync.WaitGroup` (`wg`), чтобы гарантировать, что все горутины завершат свою работу.

3. **Горутины для распределения данных**:
   - Для каждого элемента `Data` в срезе `data` запускается горутина. Каждая горутина отвечает за распределение части данных в один из трех шардов.
   - Для вычисления индекса шарда для данного ключа используется функция `hashCode`. В этом примере используется простая хеш-функция для демонстрации, но в реальных приложениях следует использовать более сложный метод хеширования. Индекс шарда определяется результатом `hashCode(d.Key) % 3`, что обеспечивает равномерное распределение между тремя шардами.
   - Затем горутина добавляет данные в соответствующий шард.

4. **Ожидание завершения горутин**: Главная функция ждет, пока все горутины завершат свою работу с использованием оператора `wg.Wait()`.

5. **Вывод данных из шардов**:
   - После того как все данные распределены, главная функция переходит к выводу данных из всех шардов.
   - Она перебирает срез `shards` и выводит ключи и значения внутри каждого шарда.

Паттерн "Sharding" в этом коде демонстрирует распределение данных между несколькими шардами, что позволяет проводить параллельную обработку и эффективное управление данными. Он особенно полезен в ситуациях, где данные должны быть разделены на более мелкие разделы для повышения масштабируемости и параллелизма.
## Пример 1:

В этом примере реализован паттерн "Sharding", который эффективно распределяет данные среди нескольких шард, обеспечивая параллельный доступ и управление данными.

1. **Шард**: Это структура, представляющая отдельный шард с мьютексами для чтения и записи (`sync.RWMutex`) и картой (`map`) для хранения данных. Шарды используются для разделения данных на части.

2. **ShardedMap**: Это срез шардов, при этом каждый шард имеет свой собственный мьютекс для безопасной обработки данных. В этом примере `ShardedMap` параметризуется типом данных `V`.

3. **NewShardedMap (Создание Sharded Map)**: Эта функция создает и инициализирует Sharded Map с заданным количеством шардов (`nShards`). Для каждого шарда создается карта для хранения данных.

4. **Get (Извлечение данных)**: Метод `Get` используется для извлечения значения, связанного с ключом, из Sharded Map. Он выбирает соответствующий шард, блокирует его для чтения (`RLock`) и возвращает значение. Мьютекс освобождается после чтения.

5. **Set (Установка данных)**: Метод `Set` используется для установки значения для заданного ключа в Sharded Map. Он выбирает соответствующий шард, блокирует его для записи (`Lock`), устанавливает значение и освобождает мьютекс.

6. **Keys (Извлечение ключей)**: Метод `Keys` собирает все ключи из всех шардов. Для обеспечения безопасности используется дополнительный мьютекс (`mu`) и `sync.WaitGroup` (`wg`), чтобы дождаться завершения чтения ключей из всех шардов.

7. **shardIndex (Вычисление индекса шарда)**: Этот метод вычисляет индекс шарда для заданного ключа с использованием хэширования SHA1.

8. **shard (Получение шарда)**: Метод `shard` возвращает шард, связанный с заданным ключом. Он использует `shardIndex` для определения индекса шарда.

9. **main (Главная функция)**: В функции `main` создается Sharded Map с 5 шардами. Затем в него добавляются три пары ключ-значение. Метод `Get` используется для извлечения данных по ключам "alpha", "beta" и "gamma". Наконец, выводятся ключи, доступные в шардах, с использованием метода `Keys`.

Паттерн "Sharding" в этом коде эффективно управляет данными, распределяет их между несколькими шардами и обеспечивает параллельный доступ к данным в многопоточной среде.
## Пример 2:

Паттерн "Sharding" применяется для создания разделенного хранилища данных, предназначенного для управления распределенными данными. Вот как это работает:

1. **Шард**: Эта структура представляет собой отдельный шард, который по сути является разделом для хранения данных. Каждый шард оснащен мьютексом для чтения и записи (`sync.RWMutex`), чтобы обеспечить безопасный доступ к данным, и картой (`map`) для хранения пар ключ-значение.

2. **ShardedStorage**: Это коллекция шардов, используемых для хранения распределенных данных.

3. **NewShardedStorage (Создание разделенного хранилища)**: Эта функция создает новое разделенное хранилище с заданным количеством шардов (`numShards`). Для каждого шарда создается карта для хранения данных, и шарды хранятся внутри `ShardedStorage`.

4. **Set (Добавление данных)**: Метод `Set` позволяет добавлять пары ключ-значение в разделенное хранилище данных. Он вычисляет соответствующий шард на основе ключа с использованием функции `shardIndex`, блокирует шард для записи, устанавливает значение и освобождает блокировку.

5. **Get (Извлечение данных)**: Метод `Get` извлекает значение, связанное с ключом, из разделенного хранилища данных. Аналогично методу `Set`, он вычисляет соответствующий шард, блокирует его для чтения и извлекает значение с сохранением безопасности потоков.

6. **shardIndex (Вычисление индекса шарда)**: Эта функция вычисляет индекс шарда для заданного ключа. В этом примере она использует простую хеш-функцию в демонстрационных целях, но в реальной ситуации следует использовать более сложный метод хеширования.

7. **hashString (Простая хеш-функция)**: Эта функция выполняет простой расчет хеша на основе символов во входной строке.

8. **Главная функция**: В функции `main` создается разделенное хранилище данных с пятью шардами. Пары ключ-значение добавляются в разделенное хранилище данных, а затем данные извлекаются и выводятся. Функция `shardIndex` помогает определить, какой шард использовать для каждого ключа, обеспечивая распределение данных между шардами.

Паттерн "Sharding" в этом коде позволяет эффективно распределять и управлять данными между несколькими шардами, обеспечивая доступ и модификацию данных параллельно и безопасно с точки зрения потоков.